<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:SlayerApp.ViewModel"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="SlayerApp.Views.AlbumView"
             x:DataType="vm:AlbumViewModel"
             Background="#121212">

  <UserControl.Resources>
    <DrawingImage x:Key="PlayIcon">
      <DrawingImage.Drawing>
        <GeometryDrawing Brush="Black" Geometry="M8 5v14l11-7z"/>
      </DrawingImage.Drawing>
    </DrawingImage>
  </UserControl.Resources>

  <ScrollViewer>
    <StackPanel>
      
      <!-- Header Section with Album Art and Info -->
      <Grid Margin="24" ColumnDefinitions="Auto,*">
        
        <!-- Album Cover -->
        <Border Grid.Column="0" 
                Width="232" Height="232"
                CornerRadius="4"
                ClipToBounds="True"
                BoxShadow="0 8 24 0 #40000000">
          <Panel>
            <Border Background="#282828">
              <PathIcon Data="{StaticResource music_regular}" 
                        Foreground="#535353"
                        Width="80" Height="80"/>
            </Border>
            <Image Source="{Binding Cover^}" 
                   Stretch="UniformToFill"/>
          </Panel>
        </Border>

        <!-- Album Info -->
        <StackPanel Grid.Column="1" 
                    Margin="24,0,0,0" 
                    VerticalAlignment="Bottom">
          
          <TextBlock Text="Album" 
                     FontSize="12" 
                     FontWeight="Bold"
                     Foreground="White"/>
          
          <TextBlock Text="{Binding Name}" 
                     FontSize="48" 
                     FontWeight="Bold"
                     Foreground="White"
                     TextWrapping="Wrap"
                     Margin="0,8,0,0"/>
          
          <StackPanel Orientation="Horizontal" 
                      Margin="0,16,0,0"
                      Spacing="4">
            <TextBlock Text="{Binding Artist}" 
                       FontSize="14" 
                       FontWeight="Bold"
                       Foreground="White"/>
            <TextBlock Text="•" 
                       FontSize="14" 
                       Foreground="#B3B3B3"/>
            <TextBlock Text="{Binding ReleaseYear}" 
                       FontSize="14" 
                       Foreground="#B3B3B3"/>
            <TextBlock Text="•" 
                       FontSize="14" 
                       Foreground="#B3B3B3"/>
            <TextBlock FontSize="14" 
                       Foreground="#B3B3B3">
              <TextBlock.Text>
                <MultiBinding StringFormat="{}{0} songs, {1}">
                  <Binding Path="SongCount"/>
                  <Binding Path="TotalDuration"/>
                </MultiBinding>
              </TextBlock.Text>
            </TextBlock>
          </StackPanel>
        </StackPanel>
      </Grid>

      <!-- Action Buttons -->
      <StackPanel Orientation="Horizontal" 
                  Margin="24,8,24,16"
                  Spacing="16">
        
        <!-- Play Button -->
        <Button Width="56" Height="56"
                CornerRadius="28"
                Background="#1DB954"
                BorderThickness="0"
                Cursor="Hand">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Background" Value="#1ED760"/>
              <Setter Property="RenderTransform" Value="scale(1.04)"/>
            </Style>
          </Button.Styles>
          <PathIcon Width="24" Height="24" Foreground="Black">
            <PathIcon.Data>
              <PathGeometry>M8 5v14l11-7z</PathGeometry>
            </PathIcon.Data>
          </PathIcon>
        </Button>

        <!-- Shuffle Button -->
        <Button Width="32" Height="32"
                Background="Transparent"
                BorderThickness="0"
                Cursor="Hand"
                Opacity="0.7">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Opacity" Value="1"/>
            </Style>
          </Button.Styles>
          <PathIcon Width="24" Height="24" Foreground="#B3B3B3">
            <PathIcon.Data>
              <PathGeometry>M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z</PathGeometry>
            </PathIcon.Data>
          </PathIcon>
        </Button>

        <!-- More Options Button -->
        <Button Width="32" Height="32"
                Background="Transparent"
                BorderThickness="0"
                Cursor="Hand"
                Opacity="0.7">
          <Button.Styles>
            <Style Selector="Button:pointerover">
              <Setter Property="Opacity" Value="1"/>
            </Style>
          </Button.Styles>
          <PathIcon Width="24" Height="24" Foreground="#B3B3B3">
            <PathIcon.Data>
              <PathGeometry>M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z</PathGeometry>
            </PathIcon.Data>
          </PathIcon>
        </Button>
      </StackPanel>

      <!-- Track List Header -->
      <Grid Margin="24,0,24,8" 
            ColumnDefinitions="48,*,Auto"
            Opacity="0.7">
        <TextBlock Grid.Column="0" 
                   Text="#" 
                   FontSize="14"
                   Foreground="#B3B3B3"
                   HorizontalAlignment="Center"/>
        <TextBlock Grid.Column="1" 
                   Text="Title" 
                   FontSize="14"
                   Foreground="#B3B3B3"/>
        <PathIcon Grid.Column="2" 
                  Width="16" Height="16" 
                  Foreground="#B3B3B3"
                  Margin="0,0,16,0">
          <PathIcon.Data>
            <PathGeometry>M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z</PathGeometry>
          </PathIcon.Data>
        </PathIcon>
      </Grid>

      <Border Height="1" Background="#282828" Margin="24,0"/>

      <!-- Song List -->
      <ItemsControl ItemsSource="{Binding Songs}" Margin="0,8,0,24">
        <ItemsControl.ItemTemplate>
          <DataTemplate x:DataType="vm:SongViewModel">
            <Border Padding="24,8" 
                    Background="Transparent"
                    Cursor="Hand"
                    CornerRadius="4">
              <Border.Styles>
                <Style Selector="Border:pointerover">
                  <Setter Property="Background" Value="#1A1A1A"/>
                </Style>
              </Border.Styles>
              
              <Grid ColumnDefinitions="48,*,Auto">
                
                <!-- Track Number / Play Icon -->
                <Panel Grid.Column="0">
                  <TextBlock Text="{Binding TrackNumber}" 
                             FontSize="16"
                             Foreground="#B3B3B3"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"
                             Name="TrackNum"/>
                  <Button Background="Transparent"
                          BorderThickness="0"
                          Command="{Binding PlayCommand}"
                          IsVisible="False"
                          Name="PlayBtn"
                          HorizontalAlignment="Center">
                    <PathIcon Width="16" Height="16" Foreground="White">
                      <PathIcon.Data>
                        <PathGeometry>M8 5v14l11-7z</PathGeometry>
                      </PathIcon.Data>
                    </PathIcon>
                  </Button>
                </Panel>

                <!-- Title and Artist -->
                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                  <TextBlock Text="{Binding Title}" 
                             FontSize="16"
                             Foreground="White"
                             TextTrimming="CharacterEllipsis"/>
                  <TextBlock Text="{Binding Artists}" 
                             FontSize="14"
                             Foreground="#B3B3B3"
                             TextTrimming="CharacterEllipsis"
                             Margin="0,2,0,0"/>
                </StackPanel>

                <!-- Duration -->
                <TextBlock Grid.Column="2" 
                           Text="{Binding DurationFormatted}" 
                           FontSize="14"
                           Foreground="#B3B3B3"
                           VerticalAlignment="Center"
                           Margin="16,0"/>
              </Grid>
            </Border>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>

    </StackPanel>
  </ScrollViewer>
</UserControl>
